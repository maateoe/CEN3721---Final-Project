st.title("URL Scanner")
st.header("Powered by urlscan.io")

#select box widget
add_selectbox = st.selectbox("Please select a category",
                                     ["","URL Scanner", "Feedback", "Surprise", "Special Thanks"])

if add_selectbox == "URL Scanner":
    # api block
    st.subheader("Enter a valid URL: ")
    input = st.text_input("URL")

    if input:
        headers = {'API-Key': '32e855ee-c1eb-4c2e-b8b0-74662973ae28', 'Content-Type': 'application/json'}
        data = {"url": "https://my.fiu.edu", "visibility": "public"}
        response = requests.post('https://urlscan.io/api/v1/scan/', headers=headers, data=json.dumps(data))
        print(response)
        print(response.json())
        st.write(response.json())
        st.success("Successful query")
    else:
        #warning box
        st.warning("Please enter a valid URL")

elif add_selectbox == "Feedback":
    # radio widget
    st.subheader("Feedback")
    rating = st.radio("Please rate your experience",
                      ["It was amazing", "It was great", "It was okay", "It was bad", "It was horrible"])
    feedback = st.text_input("Feedback")
    if rating and feedback:
        st.info("We appreciate your feedback.")


elif add_selectbox == "Surprise":
    # button widget
    st.write("Click below for a surprise")
    balloons = st.write("Surprise")
    if st.button("Press Me"):
        if balloons:
            st.balloons()
        st.write("Thanks for using our app.")

    else:
        st.write("Have a great day!")

elif add_selectbox == "Special Thanks":
    # text area widget
    txt = st.text_area(
        "Please check out the wonderful people over at urlscan.io",
        "They made it possible to provide a service such as this one.\n"
        "FREE OF CHARGE\n"
        "Thank you once again.\n"
    )

else:
    #slider widget
    st.subheader("Please select your age below")

    date_now = st.date_input("Today's date is: ", date.today())

    age = st.slider("How old are you?", 0, 130, 21)
    if age < 18:
        st.write("You are ", str(age), "years old.")
        #error box
        st.error("You're age is not valid for this website. Please exit the app.")
    else:
        st.write("You are ", str(age), "years old.")
        #success box
        st.success("You're age is valid. Please continue.")
